<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<title>SenaLink - Empresas</title>

<!-- Enlace a Google Fonts para Material Symbols Outlined -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined&display=swap"/>

<!-- Enlace a Font Awesome para los íconos -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

<!-- Tu archivo CSS -->
<link rel="stylesheet" href="../../../css/styles.css"> 

<!-- Favicon -->
<link rel="shortcut icon" href="../../../img/Favicon1.png">
</head>
<body>
    <header class="gov" id="inicio">
        <div class="gov__container">
            <a href="https://www.gov.co/" target="_blank">
                <img loading="lazy" src="../../../img/gov-logo.svg" alt="Logo de la pagina gov.co" class="gov__img">
            </a>
        </div>
    </header>
    <header class="header__home">
        <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menú">
            <img src="../../../icon/menu_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24.svg" alt="Ícono de menú" />
        </button>
        <button class="account__button">
            <a href="../../viewuser.html"> <img src="../../../icon/account_circle_24dp_FFFFFF_FILL0_wght400_GRAD0_opsz24.svg" alt="icon"></a>
        </button>
    </header>
    
    <nav id="menu" class="menu">
        <div class="menu__logo">
            <img src="../../../img/logo-proyecto1.png" alt="Logo SenaLink">
        </div>
        <ul class="menu__list">
            <li class="menu__item"><img src="../../../icon/alternativa-corporativa.svg" alt="" class="menu__icon"><a href="../Empresa/Gestion_Empresa.html" class="menu__link">Empresas</a></li>
            <li class="menu__item"><img src="../../../icon/programa formacion.png" alt="" class="menu__icon"><a href="../Programa_Formacion/Gestion_Programa.html" class="menu__link">Programa de formación</a></li>
            <li class="menu__item"><img src="../../../icon/adminsena.png" alt="" class="menu__icon"><a href="../Funcionarios/Gestion_Funcionario.html" class="menu__link">Funcionarios</a></li>
            <li class="menu__item"><img src="../../../icon/funcionario.png" alt="" class="menu__icon"><a href="../create_funcionario.html" class="menu__link">Crear Funcionario</a></li>
            <li class="menu__item"><img src="../../../icon/volver.png" alt="" class="menu__icon"><a href="../Home.html" class="menu__link">Volver</a></li>
        </ul>
    </nav>

<main class="main__content">
        <img alt="SenaLink Logo" src="../../../img/logo-proyecto1.png" class="logo__senalink"/>
        
        <section class="search-container">
            <input type="text" placeholder="Buscar...">
            <i class="fas fa-search search-icon"></i>
            <div class="dropdown">
            <button id="estadoDropdownBtn"><img src="../../../icon/filtrar.png" style="width:32px; height:32px;"></button>
                <div id="estadoDropdownMenu" class="dropdown-menu">
                    <div id="estadoDropdownMenu" class="dropdown-menu">
                        <a href="#" id="filtro-activo" data-estado="Activo">Activo</a>
                        <a href="#" id="filtro-desactivado" data-estado="Desactivado">Desactivado</a>
                    </div>
                </div>
            </div>
        </section>
        <section id="resultados" class="cardh__container"></section>
    </main>

    <script src="../../../js/script.js"></script>
    <!--<script src="../../../js/viewempresas.js"></script>
    <script src="../../../js/filter.js"></script>
    <!-- <script src="../../../js/gestionEmpresaEstado.js"></script> -->

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const contenedor = document.getElementById('resultados');

            fetch('http://localhost/senalink5/senalink/controllers/UsuarioController.php?action=listarAdminSENA')
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.data.length > 0) {
                        data.data.forEach(usuario => {
                            const card = document.createElement('div');
                            card.className = 'cardh';
                            card.style.cursor = 'pointer';
                            // Mostrar segundo nombre solo si existe, sin dejar doble espacio
                            let nombreCompleto = usuario.primer_nombre;
                            if (usuario.segundo_nombre && usuario.segundo_nombre.trim() !== '') {
                                nombreCompleto += ' ' + usuario.segundo_nombre;
                            }
                            nombreCompleto += ' ' + usuario.primer_apellido + ' ' + usuario.segundo_apellido;
                            card.innerHTML = `
                                <h3>${nombreCompleto}</h3>
                                <p>Número de documento: ${usuario.numero_documento}</p>
                            `;
                            card.addEventListener('click', () => {
                                window.location.href = `Funcionario.html?id=${usuario.id}`;
                            });
                            contenedor.appendChild(card);
                        });
                    } else {
                        contenedor.innerHTML = '<p>No se encontraron usuarios AdminSENA.</p>';
                    }
                })
                .catch(error => {
                    console.error('Error al cargar usuarios AdminSENA:', error);
                    contenedor.innerHTML = '<p>Error al cargar usuarios.</p>';
                });
        });
    </script>

    <footer>
        <p>©  Todos los derechos reservados. SenaLink</p>
    </footer>
</body>
</html>





