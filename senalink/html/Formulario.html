<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>SenaLink-Formulario</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=menu" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200&icon_names=account_circle" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
    <link rel="stylesheet" href="../css/Inputs.css">
    <link rel="shortcut icon " href="../img/Favicon1.png">
</head>
<body>
    <header class="gov" id="inicio">
        <div class="gov__container">
            <a href="https://www.gov.co/" target="_blank">
                <img loading="lazy" src="../img/gov-logo.svg" alt="Logo de la pagina gov.co" class="gov__img">
            </a>
        </div>
    </header>
    <header class="header__login">
    <div class="header__left">
    </div>

    <div class="header__center">
    </div>

    <div class="header__right">
        <img src="../img/logo-sena-white0.png" alt="Logo Izquierda" class="logo__sena">
    </div>
    </header>
    <div class="linea-verde"></div>
    <div class="container">
        <form class="container__forms">
            <img src="../img/logo-proyecto1.png" alt="" class="logo__senalink"><br>
            <div id="preguntas-dinamicas"></div>
            <div class="form__buttons"> 
                <!-- <a href="Formulario2.html" class="btn">Siguiente</a> -->
                <a href="Super_Admin/Diagnostico/VerDiagnostico.html" class="btn">Gestión</a>
                <button type="button" onclick="goBack()" class="btn">Volver</button>
            </div>
        </form>
    </div>
    <script src="../js/backbutton.js"></script>
    <script>
    // Render dinámico de preguntas y opciones desde el backend
    document.addEventListener('DOMContentLoaded', function() {
        fetch('../controllers/DiagnosticoController.php', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ accion: 'obtenerDiagnosticoCompleto' })
        })
        .then(res => res.json())
        .then(data => {
            if (data.success && data.preguntas) {
                renderPreguntasDinamicas(data.preguntas);
            } else {
                document.getElementById('preguntas-dinamicas').innerHTML = '<p>No se pudieron cargar las preguntas.</p>';
            }
        })
        .catch(() => {
            document.getElementById('preguntas-dinamicas').innerHTML = '<p>Error al cargar preguntas.</p>';
        });

        function renderPreguntasDinamicas(preguntas) {
            const cont = document.getElementById('preguntas-dinamicas');
            cont.innerHTML = '';
            preguntas.forEach(pregunta => {
                // Crear un contenedor para cada pregunta
                const preguntaDiv = document.createElement('div');
                preguntaDiv.style.display = 'flex';
                preguntaDiv.style.flexDirection = 'column';
                preguntaDiv.style.alignItems = 'center';
                preguntaDiv.style.marginBottom = '30px';

                const label = document.createElement('label');
                label.textContent = pregunta.enunciado;
                label.style.textAlign = 'center';
                label.style.fontWeight = 'bold';
                label.style.marginBottom = '10px';
                label.style.width = '100%';
                preguntaDiv.appendChild(label);

                if (pregunta.opciones && pregunta.opciones.length > 0) {
                    const select = document.createElement('select');
                    select.className = 'select_container';
                    select.style.width = '90%';
                    select.style.margin = '0 auto';
                    select.style.display = 'block';
                    const optDefault = document.createElement('option');
                    optDefault.selected = true;
                    optDefault.disabled = true;
                    optDefault.textContent = 'Seleccione una opción';
                    select.appendChild(optDefault);
                    pregunta.opciones.forEach(opc => {
                        const opt = document.createElement('option');
                        opt.value = opc.texto;
                        opt.textContent = opc.texto;
                        select.appendChild(opt);
                    });
                    preguntaDiv.appendChild(select);
                } else {
                    // Si no tiene opciones, input de texto
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.placeholder = 'Ingrese su respuesta';
                    input.className = 'input-field';
                    input.style.width = '90%';
                    input.style.margin = '0 auto';
                    preguntaDiv.appendChild(input);
                }
                cont.appendChild(preguntaDiv);
            });
        }
    });
    </script>
    <div class="linea-azul-difuminada"></div>
   <footer>
    <p>© Todos los derechos reservados. SenaLink</p>
  </footer>
</body>
</html>

